<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Subnet Tools</title>

<style>
:root { --bg:#f5f6fa; --card:#fff; --muted:#64748b; --accent:#06b6d4; --accent2:#7c3aed; --text:#1e293b; }
html,body{margin:0;font-family:Inter,ui-sans-serif;background:var(--bg);color:var(--text);}
.page{display:none;}
.home-wrapper{padding:40px 20px;min-height:100vh;}
.home-title{text-align:center;font-size:28px;font-weight:700;margin-bottom:30px;}
.tool-grid{display:flex;gap:24px;justify-content:center;flex-wrap:wrap;}
.tool-card{width:260px;background:var(--card);border-radius:14px;padding:24px;box-shadow:0 6px 16px rgba(0,0,0,0.08);cursor:pointer;transition:.25s;}
.tool-card:hover{transform:translateY(-6px);box-shadow:0 10px 20px rgba(0,0,0,0.12);}
.tool-icon{font-size:32px;margin-bottom:8px;}
.tool-title{font-size:18px;font-weight:600;margin-bottom:6px;}
.tool-desc{font-size:14px;color:var(--muted);}
.back-btn{margin:20px;font-size:16px;color:var(--accent2);cursor:pointer;}
.app{max-width:960px;margin:20px auto;padding:24px;border-radius:12px;background:var(--card);box-shadow:0 8px 24px rgba(0,0,0,0.08);}
.controls{display:grid;grid-template-columns:1fr 160px 120px;gap:12px;margin-top:18px;}
.input,.btn{background:#f9fafb;padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,0.08);}
.input label{font-size:13px;color:var(--muted);margin-bottom:6px;display:block;}
.input input,textarea{width:100%;background:transparent;border:0;outline:none;font-size:16px;}
.btn{display:flex;justify-content:center;align-items:center;cursor:pointer;user-select:none;}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;font-weight:600;}
.results{margin-top:20px;display:none;grid-template-columns:1fr;gap:18px;}
.cardbox{padding:16px;border-radius:10px;background:var(--card);box-shadow:0 4px 12px rgba(0,0,0,0.05);}
.cardbox h3{margin:0 0 10px;}
table{width:100%;border-collapse:collapse;}
td,th{padding:6px;border-bottom:1px dashed rgba(0,0,0,0.1);text-align:left;}
.mono{font-family:monospace;}
.binary{font-family:monospace;background:#f1f5f9;padding:4px;border-radius:4px;display:inline-block;word-break:break-word;}
.message-ok{color:#16a34a;} .message-err{color:#dc2626;}
</style>
</head>
<body>

<!-- HOME -->
<div id="page-home" class="page" style="display:block;">
  <div class="home-wrapper">
    <div class="home-title">Every tool you need to work with IPs in one place</div>
    <div class="tool-grid">
      <div class="tool-card" onclick="openPage('ipv4')"><div class="tool-icon">üåê</div><div class="tool-title">IPv4</div><div class="tool-desc">Subnet calculator</div></div>
      <div class="tool-card" onclick="openPage('ipv6')"><div class="tool-icon">üß©</div><div class="tool-title">IPv6</div><div class="tool-desc">Subnet calculator</div></div>
      <div class="tool-card" onclick="openPage('supernet')"><div class="tool-icon">üì¶</div><div class="tool-title">Supernetting</div><div class="tool-desc">Summarize IPv4 networks</div></div>
    </div>
  </div>
</div>

<!-- IPv4 -->
<div id="page-ipv4" class="page">
  <div class="back-btn" onclick="openPage('home')">‚Üê Back</div>
  <div class="app">
    <h1>IPv4 Calculator</h1>
    <div class="controls">
      <div class="input"><label>IPv4 address & mask</label><input id="addrInput" placeholder="192.168.1.10/24 or 10.0.0.5 255.255.255.0"></div>
      <div class="input"><label>Optional prefix</label><input id="prefixInput" placeholder="24"></div>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <div class="btn primary" id="calcBtn">Calculate</div>
        <div class="btn" id="resetBtn">Reset</div>
      </div>
    </div>
    <div id="message"></div>
    <div class="results" id="results">
      <div class="cardbox"><h3>Summary</h3>
        <table>
          <tr><th>Address</th><td id="r_address"></td></tr>
          <tr><th>Netmask</th><td id="r_netmask"></td></tr>
          <tr><th>Wildcard</th><td id="r_wildcard"></td></tr>
          <tr><th>Network</th><td id="r_network"></td></tr>
          <tr><th>Broadcast</th><td id="r_broadcast"></td></tr>
          <tr><th>Host min</th><td id="r_hostmin"></td></tr>
          <tr><th>Host max</th><td id="r_hostmax"></td></tr>
          <tr><th>Hosts</th><td id="r_hostsnet"></td></tr>
          <tr><th>Class</th><td id="r_class"></td></tr>
          <tr><th>Scope</th><td id="r_scope"></td></tr>
        </table>
      </div>
      <div class="cardbox"><h3>Binary</h3>
        <table>
          <tr><td>Address</td><td id="b_address"></td><td id="b_address_bin" class="binary"></td></tr>
          <tr><td>Netmask</td><td id="b_netmask"></td><td id="b_netmask_bin" class="binary"></td></tr>
          <tr><td>Wildcard</td><td id="b_wildcard"></td><td id="b_wildcard_bin" class="binary"></td></tr>
          <tr><td>Network</td><td id="b_network"></td><td id="b_network_bin" class="binary"></td></tr>
          <tr><td>Broadcast</td><td id="b_broadcast"></td><td id="b_broadcast_bin" class="binary"></td></tr>
          <tr><td>HostMin</td><td id="b_hostmin"></td><td id="b_hostmin_bin" class="binary"></td></tr>
          <tr><td>HostMax</td><td id="b_hostmax"></td><td id="b_hostmax_bin" class="binary"></td></tr>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- IPv6 -->
<div id="page-ipv6" class="page">
  <div class="back-btn" onclick="openPage('home')">‚Üê Back</div>
  <div class="app">
    <h1>IPv6 Calculator</h1>
    <div class="controls">
      <div class="input"><label>IPv6 address & prefix</label><input id="ipv6Input" placeholder="2001:db8::1/64"></div>
      <div style="display:flex;flex-direction:column;gap:8px;">
        <div class="btn primary" id="calcBtn6">Calculate</div>
        <div class="btn" id="resetBtn6">Reset</div>
      </div>
    </div>
    <div id="message6"></div>
    <div class="results" id="results6">
      <div class="cardbox"><h3>Summary</h3>
        <table>
          <tr><th>Address</th><td id="r6_address"></td></tr>
          <tr><th>Prefix</th><td id="r6_prefix"></td></tr>
          <tr><th>Network</th><td id="r6_network"></td></tr>
          <tr><th>First address</th><td id="r6_first"></td></tr>
          <tr><th>Last address</th><td id="r6_last"></td></tr>
          <tr><th>Total addresses</th><td id="r6_range"></td></tr>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Supernetting -->
<div id="page-supernet" class="page">
  <div class="back-btn" onclick="openPage('home')">‚Üê Back</div>
  <div class="app">
    <h1>Supernetting Tool (IPv4)</h1>
    <div class="controls" style="grid-template-columns:1fr 120px 120px;">
      <div class="input"><label>Enter networks (one per line)</label>
        <textarea id="superInput" rows="6" placeholder="192.168.0.0/24&#10;192.168.1.0/24&#10;192.168.2.0/24"></textarea>
      </div>
      <div class="btn primary" id="superCalc">Summarize</div>
      <div class="btn" id="superReset">Reset</div>
    </div>
    <div id="superMessage"></div>
    <div class="results" id="superResults">
      <div class="cardbox"><h3>Result</h3>
        <table>
          <tr><th>Supernet</th><td id="superSupernet"></td><td id="superSupernetBin" class="binary"></td></tr>
          <tr><th>Network address</th><td id="superNetwork"></td><td id="superNetworkBin" class="binary"></td></tr>
          <tr><th>First address</th><td id="superFirst"></td><td id="superFirstBin" class="binary"></td></tr>
          <tr><th>Last address</th><td id="superLast"></td><td id="superLastBin" class="binary"></td></tr>
          <tr><th>Broadcast address</th><td id="superBroadcast"></td><td id="superBroadcastBin" class="binary"></td></tr>
          <tr><th>Total addresses</th><td id="superTotal"></td></tr>
          <tr><th>Usable addresses</th><td id="superUsable"></td></tr>
          <tr><th>Prefix length</th><td id="superPrefix"></td></tr>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
// Page switch
function openPage(page){document.querySelectorAll('.page').forEach(p=>p.style.display='none');document.getElementById('page-'+page).style.display='block';}

/* IPv4 helpers */
function ipToInt(ip){
  const parts=ip.trim().split('.').map(x=>parseInt(x,10));
  if(parts.length!==4||parts.some(p=>isNaN(p)||p<0||p>255))return null;
  return ((parts[0]<<24)>>>0)+((parts[1]<<16)>>>0)+((parts[2]<<8)>>>0)+(parts[3]>>>0);
}
function intToIp(int){return[(int>>>24)&255,(int>>>16)&255,(int>>>8)&255,int&255].join('.');}
function octets(int){return[(int>>>24)&255,(int>>>16)&255,(int>>>8)&255,int&255];}
function intToBinaryDots(int){return octets(int).map(n=>n.toString(2).padStart(8,'0')).join('.');}
function prefixToMask(prefix){if(prefix<0||prefix>32)return null;return prefix===0?0:(~((1<<(32-prefix))-1))>>>0;}
function maskToPrefix(maskInt){let c=0;for(let i=31;i>=0;i--){if(maskInt&(1<<i))c++;else break;}if(((maskInt<<c)>>>0)!==0)return null;return c;}
function wildcardFromMask(maskInt){return(~maskInt)>>>0;}
function isPrivate(ipInt){const f=(ipInt>>>24)&255; if(f===10)return true; if(ipInt>=ipToInt('172.16.0.0')&&ipInt<=ipToInt('172.31.255.255'))return true; if(ipInt>=ipToInt('192.168.0.0')&&ipInt<=ipToInt('192.168.255.255'))return true; return false;}
function classOf(ipInt){const first=(ipInt>>>24)&255; if(first<=127)return'A'; if(first<=191)return'B'; if(first<=223)return'C'; if(first<=239)return'D (Multicast)'; return'E (Reserved)';}

/* IPv4 calculator */
function parseIPv4Input(raw,px){
  raw=raw.trim(); if(!raw) return null;
  let ipStr=raw, prefix=null, maskStr=null;
  if(raw.includes('/')){const[a,p]=raw.split('/'); ipStr=a.trim(); prefix=parseInt(p.trim(),10);}
  else{
    const parts=raw.split(' ');
    if(parts.length===2){ ipStr=parts[0].trim(); maskStr=parts[1].trim();
      if(maskStr.includes('.')){const mInt=ipToInt(maskStr); if(mInt===null) return null; prefix=maskToPrefix(mInt);} else {prefix=parseInt(maskStr,10);}
    }
  }
  if(px){ let p=parseInt(px,10); if(!isNaN(p)) prefix=p; }
  const ipInt=ipToInt(ipStr); if(ipInt===null) return null;
  if(prefix===null||isNaN(prefix)||prefix<0||prefix>32) return {ipInt,prefix:null};
  return {ipInt,prefix};
}
function calcIPv4(ipInt,prefix){
  const maskInt=prefixToMask(prefix), wild=wildcardFromMask(maskInt);
  const network=(ipInt&maskInt)>>>0, broadcast=(network|wild)>>>0;
  let hostMin=null,hostMax=null,hostsPer=0;
  if(prefix<=30){hostsPer=(1<<(32-prefix))-2;hostMin=(network+1)>>>0;hostMax=(broadcast-1)>>>0;}
  else if(prefix===31){hostsPer=0;hostMin=network;hostMax=broadcast;}
  else{hostsPer=1;hostMin=network;hostMax=network;}
  return{maskInt,wild,network,broadcast,hostMin,hostMax,hostsPer};
}
function showMessage(s,err=false){const m=document.getElementById('message');m.className=err?'message-err':'message-ok';m.textContent=s;}
function renderIPv4(parsed){
  const{ipInt,prefix}=parsed; if(prefix===null){showMessage("Prefix missing",true);return;}
  const d=calcIPv4(ipInt,prefix);
  document.getElementById('r_address').innerHTML=`<span class="mono">${intToIp(ipInt)}/${prefix}</span>`;
  document.getElementById('r_netmask').textContent=intToIp(d.maskInt);
  document.getElementById('r_wildcard').textContent=intToIp(d.wild);
  document.getElementById('r_network').textContent=intToIp(d.network);
  document.getElementById('r_broadcast').textContent=intToIp(d.broadcast);
  document.getElementById('r_hostmin').textContent=d.hostMin?intToIp(d.hostMin):'-';
  document.getElementById('r_hostmax').textContent=d.hostMax?intToIp(d.hostMax):'-';
  document.getElementById('r_hostsnet').textContent=d.hostsPer;
  document.getElementById('r_class').textContent=classOf(ipInt);
  document.getElementById('r_scope').textContent=isPrivate(ipInt)?"Private":"Public";
  // Binary
  document.getElementById('b_address').textContent=intToIp(ipInt);
  document.getElementById('b_address_bin').textContent=intToBinaryDots(ipInt);
  document.getElementById('b_netmask').textContent=intToIp(d.maskInt);
  document.getElementById('b_netmask_bin').textContent=intToBinaryDots(d.maskInt);
  document.getElementById('b_wildcard').textContent=intToIp(d.wild);
  document.getElementById('b_wildcard_bin').textContent=intToBinaryDots(d.wild);
  document.getElementById('b_network').textContent=intToIp(d.network);
  document.getElementById('b_network_bin').textContent=intToBinaryDots(d.network);
  document.getElementById('b_broadcast').textContent=intToIp(d.broadcast);
  document.getElementById('b_broadcast_bin').textContent=intToBinaryDots(d.broadcast);
  document.getElementById('b_hostmin').textContent=d.hostMin?intToIp(d.hostMin):'-';
  document.getElementById('b_hostmin_bin').textContent=d.hostMin?intToBinaryDots(d.hostMin):'-';
  document.getElementById('b_hostmax').textContent=d.hostMax?intToIp(d.hostMax):'-';
  document.getElementById('b_hostmax_bin').textContent=d.hostMax?intToBinaryDots(d.hostMax):'-';
  document.getElementById('results').style.display="grid";
  showMessage("Calculated ‚úì",false);
}
document.getElementById('calcBtn').onclick=()=>{
  showMessage("");
  const parsed=parseIPv4Input(document.getElementById('addrInput').value,document.getElementById('prefixInput').value);
  if(!parsed){showMessage("Invalid IPv4 input",true);document.getElementById('results').style.display="none";return;}
  if(parsed.prefix===null){showMessage("Prefix not found",true);return;}
  renderIPv4(parsed);
};
document.getElementById('resetBtn').onclick=()=>{
  document.getElementById('addrInput').value=""; document.getElementById('prefixInput').value="";
  const m=document.getElementById('message'); m.textContent=""; m.className="";
  document.getElementById('results').style.display="none";
};

/* IPv6 helpers */
function expandIPv6(addr){
  let ipv4Tail=null;
  if(addr.includes('.')){
    const lastColon=addr.lastIndexOf(':'); const v4=addr.slice(lastColon+1);
    const parts=v4.split('.').map(x=>parseInt(x,10));
    if(parts.length!==4||parts.some(p=>isNaN(p)||p<0||p>255)) return null;
    ipv4Tail=[((parts[0]<<8)|parts[1]).toString(16),((parts[2]<<8)|parts[3]).toString(16)];
    addr=addr.slice(0,lastColon);
  }
  const segs=addr.split('::'); let left=segs[0]?segs[0].split(':').filter(Boolean):[]; let right=segs[1]?segs[1].split(':').filter(Boolean):[];
  const fill=8-(left.length+right.length+(ipv4Tail?2:0)); if(fill<0) return null;
  const full=[...left,...Array(fill).fill('0'),...right]; if(ipv4Tail){full[6]=ipv4Tail[0];full[7]=ipv4Tail[1];}
  if(full.length!==8) return null; return full.map(h=>h.padStart(4,'0').toLowerCase()).join(':');
}
function compressIPv6(expanded){
  const parts=expanded.split(':').map(h=>h.replace(/^0+/, '')||'0');
  let bestStart=-1,bestLen=0,curStart=-1,curLen=0;
  for(let i=0;i<8;i++){ if(parts[i]==='0'){ if(curStart===-1)curStart=i; curLen++; if(curLen>bestLen){bestLen=curLen; bestStart=curStart;} } else {curStart=-1;curLen=0;} }
  if(bestLen>1){ const before=parts.slice(0,bestStart).join(':'); const after=parts.slice(bestStart+bestLen).join(':'); return (before?before:'')+'::'+(after?after:''); }
  return parts.join(':');
}
function ipv6ToBigInt(expanded){
  const parts=expanded.split(':').map(h=>parseInt(h,16)); let val=0n; for(let i=0;i<8;i++){ val=(val<<16n)+BigInt(parts[i]); } return val;
}
function bigIntToIPv6(big){
  const parts=[]; for(let i=0;i<8;i++){ const shift=16n*BigInt(7-i); const hex=(big>>shift)&0xffffn; parts.push(hex.toString(16).padStart(4,'0')); }
  return parts.join(':');
}

/* IPv6 calculator */
function parseIPv6Input(raw){
  raw=raw.trim(); if(!raw) return null;
  let addr=raw, prefix=null;
  if(raw.includes('/')){ const[a,p]=raw.split('/'); addr=a.trim(); prefix=parseInt(p.trim(),10); }
  if(prefix===null||isNaN(prefix)||prefix<0||prefix>128) return null;
  const expanded=expandIPv6(addr); if(!expanded) return null;
  return {addr,prefix,expanded};
}
function calcIPv6(expanded,prefix){
  const val=ipv6ToBigInt(expanded);
  const hostBits=BigInt(128-prefix);
  const mask = (((1n<<BigInt(prefix)) - 1n) << hostBits);
  const network = val & mask;
  const first = network;
  const last = network + ((1n<<hostBits) - 1n);
  const total = hostBits===0n ? 1n : (1n<<hostBits);
  return {network,first,last,total};
}
function showMessage6(s,err=false){const m=document.getElementById('message6');m.className=err?'message-err':'message-ok';m.textContent=s;}
function renderIPv6(parsed){
  const{addr,prefix,expanded}=parsed; const d=calcIPv6(expanded,prefix);
  document.getElementById('r6_address').textContent=`${addr}/${prefix}`;
  document.getElementById('r6_prefix').textContent=`${prefix}`;
  document.getElementById('r6_network').textContent=`${compressIPv6(bigIntToIPv6(d.network))}/${prefix}`;
  document.getElementById('r6_first').textContent=compressIPv6(bigIntToIPv6(d.first));
  document.getElementById('r6_last').textContent=compressIPv6(bigIntToIPv6(d.last));
  document.getElementById('r6_range').textContent=d.total.toString()+" addresses";
  document.getElementById('results6').style.display="grid";
  showMessage6("Calculated ‚úì",false);
}
document.getElementById('calcBtn6').onclick=()=>{
  showMessage6("");
  const parsed=parseIPv6Input(document.getElementById('ipv6Input').value);
  if(!parsed){showMessage6("Invalid IPv6 input",true);document.getElementById('results6').style.display="none";return;}
  renderIPv6(parsed);
};
document.getElementById('resetBtn6').onclick=()=>{
  document.getElementById('ipv6Input').value=""; const m=document.getElementById('message6'); m.textContent=""; m.className="";
  document.getElementById('results6').style.display="none";
};

/* Supernetting (IPv4) */
function summarizeIPv4(networks){
  const parsed=[];
  for(const n of networks){
    const s=n.trim(); if(!s) continue;
    const [ip,pfx]=s.split('/'); const prefix=parseInt(pfx,10); const ipInt=ipToInt(ip);
    if(ipInt===null||isNaN(prefix)||prefix<0||prefix>32) return null;
    const mask=prefixToMask(prefix); const net=(ipInt&mask)>>>0;
    parsed.push({net,prefix});
  }
  if(parsed.length<2) return null;
  const nets=parsed.map(p=>p.net).sort((a,b)=>a-b);
  const minNet=nets[0], maxNet=nets[nets.length-1];
  let xor=minNet^maxNet, common=0; for(let i=31;i>=0;i--){ if((xor&(1<<i))!==0) break; common++; }
  const superPrefix=common;
  const superMask=prefixToMask(superPrefix);
  const superNet=(minNet&superMask)>>>0;
  const broadcast=(superNet|(~superMask))>>>0;
  const total=(1<<(32-superPrefix));
  const usable=superPrefix<=30?total-2:(superPrefix===31?0:1);
  const first=superPrefix<=30?superNet+1:superNet;
  const last=superPrefix<=30?broadcast-1:broadcast;
  return {superNet,superPrefix,broadcast,total,usable,first,last};
}
function showSuper(s,err=false){const m=document.getElementById('superMessage');m.className=err?'message-err':'message-ok';m.textContent=s;}
document.getElementById('superCalc').onclick=()=>{
  showSuper("");
  const raw=document.getElementById('superInput').value.trim();
  const list=raw.split(/\n|,/).map(x=>x.trim()).filter(Boolean);
  if(list.length<2){showSuper("Enter at least two networks",true);document.getElementById('superResults').style.display="none";return;}
  const res=summarizeIPv4(list);
  if(!res){showSuper("Invalid networks",true);document.getElementById('superResults').style.display="none";return;}
  document.getElementById('superSupernet').textContent=`${intToIp(res.superNet)}/${res.superPrefix}`;
  document.getElementById('superSupernetBin').textContent=intToBinaryDots(res.superNet);
  document.getElementById('superNetwork').textContent=intToIp(res.superNet);
  document.getElementById('superNetworkBin').textContent=intToBinaryDots(res.superNet);
  document.getElementById('superFirst').textContent=intToIp(res.first);
  document.getElementById('superFirstBin').textContent=intToBinaryDots(res.first);
  document.getElementById('superLast').textContent=intToIp(res.last);
  document.getElementById('superLastBin').textContent=intToBinaryDots(res.last);
  document.getElementById('superBroadcast').textContent=intToIp(res.broadcast);
  document.getElementById('superBroadcastBin').textContent=intToBinaryDots(res.broadcast);
  document.getElementById('superTotal').textContent=res.total;
  document.getElementById('superUsable').textContent=res.usable;
  document.getElementById('superPrefix').textContent=res.superPrefix;
  document.getElementById('superResults').style.display="grid";
  showSuper("Summarized ‚úì",false);
};
document.getElementById('superReset').onclick=()=>{
  document.getElementById('superInput').value=""; const m=document.getElementById('superMessage'); m.textContent=""; m.className="";
  document.getElementById('superResults').style.display="none";
};
</script>

</body>
</html>
